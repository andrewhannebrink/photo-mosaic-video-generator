//
//  Bot
//  class for performing various twitter actions
//
var utf8 = require('utf8');
var Twit = require('../lib/twitter');

var Bot = module.exports = function(config) { 
  this.twit = new Twit(config);
};

//
//  post a tweet
//
Bot.prototype.tweet = function (status, callback) {
  if(typeof status !== 'string') {
    return callback(new Error('tweet must be of type String'));
  } else if(status.length > 140) {
    return callback(new Error('tweet is too long: ' + status.length));
  }
  this.twit.post('statuses/update', { status: status }, callback);
};

Bot.prototype.search = function(term, date, callback) {
  if(typeof term !== 'string') {
    return callback(new Error('search term must be of type String'));
  }
  this.twit.get('search/tweets', {q: term + ' since:' + date, count: 100 }, function(err, data, response) {
    //randomTweet = randIndex(data)
    console.log(data);
    /*for (var i = 0; i < data.statuses.length; i++) {
      console.log(data.statuses[i]);
    }*/
  });
};

function randIndex (arr) {
  var index = Math.floor(arr.length*Math.random());
  return arr[index];
};
